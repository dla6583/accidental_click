<html>
<head>
    <meta charset="utf-8">
    <title>cartpage</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="cartpage.css"/>
    
</head>

<body>
    <div id="container">
        <div id="name_header">
            <p>SID Laboratory</p>
        </div>
        <div id="top_header">
            <div class="nav nav_left">
                <a href="#1"><img src="search.png"></a>
            </div>
            <div class='nav nav_right'>
                <a href="cartpage.html" target="_blank"><img src="shopping-cart.png"></a>
                <a href="#3"><img src="user.png"></a>
            </div>
        </div>
        <br>
        <div id="top_catagory">
            <div class="order">Order</div>
        </div>
        <div id="middle">
            <div class="middle_center">
                <div class="option_bar">
                    <div class="explain total_amount">
                        <p>전체 <p id = "totalnum"></p>개</p>
                    </div>
                    <div class="explain item_name">
                        <p>상품명</p>
                    </div>
                    <div class="explain amount">
                        <p>수량</p>
                    </div>
                    <div class="explain prize">
                        <p>주문 금액</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb_all" id="select_check" onclick="checking()">
                    </div>
                    <div class="delete" >
                        <img src="x.png" onclick="select_deleting()">
                    </div>
                </div>
                <div class="cart_container">
                    <div class="item_img">
                        <img src="item2.png">
                    </div>
                    <div class="explain item_name">
                        <p>상품 이름0</p>
                    </div>
                    <div class="explain amount">
                        <p>1</p>
                    </div>
                    <div class="explain prize">
                        <p class="item_prize">10000</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb">
                    </div>
                    <div class="delete_item" >
                        <img src="x.png" onclick="deleting('0')">
                    </div>

                </div>
                <div class="cart_container">
                    <div class="item_img">
                        <img src="item1.png">
                    </div>
                    <div class="explain item_name">
                        <p>상품 이름1</p>
                    </div>
                    <div class="explain amount">
                        <p>2</p>
                    </div>
                    <div class="explain prize">
                        <p class="item_prize">20000</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb">
                    </div>
                    <div class="delete_item">
                        <img src="x.png" onclick="deleting('1')">
                    </div>
                    
                </div>
                <div class="cart_container">
                    <div class="item_img">
                        <img src="item3.png">
                    </div>
                    <div class="explain item_name">
                        <p>상품 이름2</p>
                    </div>
                    <div class="explain amount">
                        <p>3</p>
                    </div>
                    <div class="explain prize">
                        <p class="item_prize">30000</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb">
                    </div>
                    <div class="delete_item">
                        <img src="x.png" onclick="deleting('2')">
                    </div>
                </div>
                <div class="cart_container">
                    <div class="item_img">
                        <img src="item4.png">
                    </div>
                    <div class="explain item_name">
                        <p>상품 이름3</p>
                    </div>
                    <div class="explain amount">
                        <p>4</p>
                    </div>
                    <div class="explain prize">
                        <p class="item_prize">40000</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb">
                    </div>
                    <div class="delete_item">
                        <img src="x.png" onclick="deleting('3')">
                    </div>
                    
                </div>
                <div class="cart_container">
                    <div class="item_img">
                        <img src="item5.png">
                    </div>
                    <div class="explain item_name">
                        <p>상품 이름4</p>
                    </div>
                    <div class="explain amount">
                        <p>2</p>
                    </div>
                    <div class="explain prize">
                        <p class="item_prize">40000</p>
                    </div>
                    <div class="selection_all">
                        <input type="checkbox" class="chb">
                    </div>
                    <div class="delete_item">
                        <img src="x.png" onclick="deleting('4')">
                    </div>
                    
                </div>
            </div><!--
            <div class="total_explain">
                <p>총 가격은<p id="total_prize"> </p> 입니다.</p>
            </div>-->
            <script type="text/javascript">
                const all_checkbox =document.getElementById("select_check");
                const boxes = document.querySelectorAll(".chb");
                let totalnum = document.getElementById("totalnum");
                const items = document.querySelectorAll(".cart_container");
                totalnum.innerText=items.length;
                
                let totalprize= document.getElementById("total_prize");
                var prizeparameter = Number(0);
                const prizes = document.querySelectorAll(".item_prize");

                function checking(){
                    if(all_checkbox.checked == true){
                        for(var i =0;i<boxes.length;i++){
                            boxes[i].checked = true;
                        }
                    }
                    else{
                        for(var i =0;i<boxes.length;i++){
                            boxes[i].checked = false;
                        }
                    }
                }
                function select_deleting(){
                    for(var i =0;i<items.length;i++){
                        if(boxes[i].checked == true){
                            items[i].replaceChildren();
                            items[i].remove();
                        }
                    }
                    const new_items = document.querySelectorAll(".cart_container");
                    totalnum.innerText=new_items.length;
                    summing();
                }   
                function deleting(i){
                    items[i].replaceChildren();
                    items[i].remove();
                    const new_items = document.querySelectorAll(".cart_container");
                    totalnum.innerText=new_items.length;
                    summing();
                }
                function summing(){
                    prizeparameter = Number(0);
                    for(var i=0; i<prizes.length;i++){
                        
                        prizeparameter = prizeparameter + Number(prizes[i].innerText);
                    }
                    totalprize.innerText=prizeparameter;
                }
                summing();

            </script>
        </div>

        <div id="bottom">


        </div>
    </div>

</body>

</html>